/**
 * Custom element styles should go here.
 *
 * For styles that can be used for multiple elements / on multiple pages, use
 * the styles.scss file.
 *
 */

 body.home {
    background:
        transparent
        linear-gradient(
            0deg,
            #59bbab 50%,
            #b5e1d9 60%,
            #efeeff 70%,
            #dfddff 80%,
            #a29cfe 100%)
        0% 0% no-repeat padding-box;

    text-align: center;

    @include media-breakpoint-up(md) {
        text-align: left;
    }

    main {
        padding-bottom: 0 !important;
    }

    section#intro {

        background: transparent url(../img/pois.svg) bottom 130% center no-repeat;
        background-size: 2500px;

        @include media-breakpoint-up(md) {
            padding-top: 4rem;
        }

        @include media-breakpoint-up(lg) {
            padding-top: 8rem;
        }

        div#what {
            margin-bottom: 5rem;

            p.tagline {
                @extend .lead;
                max-width: 40rem;
            }

            a.cta {
                font-weight: bold;
                @extend .btn;
                @extend .btn-lg;
                @extend .btn-primary;
                @extend .px-5;
                @extend .mb-3;
                border-radius: 0 1rem 1rem 1rem;
                @extend .shadow-sm;
            }

            img {
                float: right;
                width: 700px;
                max-width: 100%;
                @extend .mt-3;
                @extend .mb-5;

                @include media-breakpoint-up(lg) {
                    margin-top: -100px !important;
                }
            }
        }

        div#how {
            clear: both;
            @extend .pb-5;

            div.marketing {
                @extend .row;
                margin-top: 5rem;

                div {
                    @extend .col-md-4;
                    @extend .mb-5;

                    img {
                        display: block;
                        max-width: 100%;
                        margin: auto;
                        @extend .mb-3;
                    }

                    p {
                        text-align: center;
                        font-size: 1.5rem;
                        font-family: $font-family-sans-serif;
                        font-weight: bold;
                    }
                }
            }
        }
    }

    section#home-stats {
        padding: 0;

        &>div {
            width: 100%;
            padding: 4rem 0 0 0;
            background: transparent url(../img/courbes.svg) top center no-repeat;
        }

        div.container-lg {

            & > div {
                @extend .row;
                @extend .mt-5;
                text-align: center;

                div {
                    @extend .col-md-4;
                    margin-bottom: 4rem;

                    h2 {
                        text-transform: uppercase;
                        @extend .h4;
                        font-family: $font-family-base;
                        font-weight: bold;

                        span {
                            display: block;
                            font-family: $font-family-base;
                            font-size: 4rem;
                            font-weight: 200;
                        
                            @include media-breakpoint-up(sm) {
                                font-size: 6rem;
                            }
                        }      
                    }

                    p {
                        @extend .lead;
                        font-weight: bold;
                        margin-bottom: 0;
                    }
                }
            }
        }
    }

    section#partner {
        @extend .bg-white;
        padding: 4rem 0;

        div#logos {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
        }

        img{
            @extend .my-3;
            @extend .mx-4;
            max-height: 48px;
        }
    }
}

section#marketing {
    @extend .py-5;
    @extend .text-center;

    h1 {
        @extend .mb-3;
    }

    .container > p {
        @extend .lead;

        strong {
            font-weight: bold;
        }
    }

    div.marketing {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;

        div{
            @extend .px-3;
            @extend .pt-3;
            @extend .col;

            i{
                @extend .mb-3;
            }
        }
    }
}

section#search-engine {
    margin: 2rem 0;

    div.other-actions {
        @extend .mb-2;

        button, a {
            @extend .btn;
            @extend .btn-link;
            color: white;
            box-shadow: none;

            &.hidden {
                display: none;
            }

            &:first-child {
                padding-left: 0;
            }
        }

        #save-alert-btn {
            @extend .btn;
            @extend .btn-primary;
            font-weight: bold;
            width: 100%;
            display: block;
            @extend .mt-2;

            @include media-breakpoint-up(md) {
                margin-top: 0 !important;
                width: inherit;
                float: right;
            }

            @include icon(before, $fa-var-bell);
            border-radius: 0 1rem 1rem 1rem;
            min-width: 15em;
        }
    }

    div.form-container {
        @extend .card;
        @extend .d-none;
        @extend .d-lg-block;
        background-color: $light-purple;
        border-radius: 0 1rem 1rem 1rem;
        @extend .shadow;
    }

    div.form-body {
        @extend .card-body;
        @extend .py-4;

        div.col + div.col {
            border-left: 3px solid white;
        }

        div.checkbox-group {
            label + input {
                @extend .ml-2;
            }
        }

        div.form-check-inline {
            align-items: baseline;
            margin-bottom: 1rem;
            font-weight: bold;

            input[type=checkbox] {
                margin-right: 0.5rem;
            }
        }

        div.form-group {
            margin-bottom: 0;

            & > ul {
                list-style-type: none;
                padding-left: 0;
            }
        }

        div.form-group + div.form-group {
            margin-top: 1rem;
        }

        #form-group-text label,
        #form-group-backers label {
            margin-bottom: 1rem;
        }

        input[type=text] {
            background-color: transparent;
            color: white;
            border-radius: 0 1rem 1rem 1rem;

            &::placeholder {
                color: #ccc;
            }
        }
    }

    div.actions-row {
        @extend .mt-3;
        text-align: right;

        select {
            @extend .custom-select;
            display: inline-block;
            width: inherit;
            border-radius: 0 1rem 1rem 1rem;
            border: none;
        }

        button.search-btn {
            @extend .btn-block;
            @include icon(before, $fa-var-search);
        }
    }
}

div#search {
    article {
        margin-bottom: 2rem;
    }

    section.search-meta {
        @extend .mb-4;

        p {
            margin-bottom: 0;
        }
    }
}

section#aid-list,
section#program-list {


    &.loading {
        opacity: 0.3;
    }

    div.aids {
        @extend .row;
        @extend .row-cols-1;
        @extend .row-cols-sm-2;
        @extend .row-cols-md-3;
        @extend .no-gutters;
        margin-left: -.5rem;
        margin-right: -.5rem;
    }

    div.col {
        padding-bottom: 1rem;
        padding-left: .5rem !important;
        padding-right: .5rem !important;
    }

    article {
        @extend .card;
        @extend .bg-white;
        @extend .text-dark;
        @extend .shadow-sm;
        height: 100%;
        border-radius: 2rem 0 1rem 1rem;
        margin-bottom: $card-columns-gap !important;


        div {
            @extend .card-body;

            span.deadline {
                float: right;
                display: block;
                @extend .ml-2;
                @extend .mb-2;

            }

            span.deadline-delta {
                background-color: $contrast-color;
                padding: .3rem 1.5rem;
                border-radius: 2rem 0 2rem 2rem;
                font-size: 1.25rem;
                color: white;
                font-weight: bold;
                text-align: center;
                font-family: $font-family-sans-serif;
            }

            span.no-deadline {
                height: 2rem;
                width: 2rem;
                border-top: 5px solid $contrast-color;
                border-right: 5px solid $contrast-color;
                border-radius: 3px;
            }

            h1 {
                @extend .h5;
                @extend .card-title;
                @extend .mb-4;
                @extend .pb-3;
                text-align: left;

                a {
                    color: $font-color;
                }

                a:visited {
                    color: #6c6984;
                }

                div.status-icons {
                    @extend .pl-4;
                    @extend .float-right;

                    span.icon {
                        @extend .pl-1;

                        i.fas {
                            color: $primary;
                        }
                    }
                }

                i.fa-clock {
                    color: $danger;
                }

                small {
                    @extend .text-muted;
                }
            }

            h2 {
                @extend .h6;
                margin-bottom: 0;
                text-transform: uppercase;

                &.financers {
                    @include icon(before, $fa-var-handshake);
                }

                &.aid-type {
                    @include icon(before, $fa-var-cog);
                }

                &.subvention-rate {
                    @include icon(before, $fa-var-percent);
                }

                &.recurrence {
                    @include icon(before, $fa-var-history);
                }

                &.deadline {
                    @include icon(before, $fa-var-calendar-alt);
                }
            }

            ul {
                padding: 0;
                list-style: none;
            }
        }
    }

    section.program {
        border-left: 5px solid $primary;
    }

    div.list-actions {
        &>span {
            @extend .mr-auto;
        }

        div.sorting-menu {
            @extend .mr-3;

            button {
                @extend .btn;
                @extend .btn-primary;
                @extend .btn-outline-light;
                @extend .dropdown-toggle;
            }

            div {
                @extend .dropdown-menu;

                a {
                    @extend .dropdown-item;
                }
            }
        }
    }
}

section#bundles {
    nav {
        @extend .card;
        @extend .my-3;

        h2 {
            @extend .card-header;
            font-size: 1rem;
        }

        ul {
            @extend .list-group;
            @extend .list-group-flush;

            li {
                @extend .list-group-item;

                a.active {
                    font-weight: bold;
                }
            }
        }
    }
}

section#aid-edit {
    @extend .row;

    div.form-sidebar {
        @extend .col-md-4;
        @extend .mb-3;

        div.sidebar-actions {
            @extend .card;
            @include border-radius(0);

            &:first-of-type {
                @include border-top-radius($card-border-radius);
            }

            &:last-of-type {
                @include border-bottom-radius($card-border-radius);
            }

            &:not(:last-of-type) {
                margin-bottom: 0;
                border-bottom: 0;
            }


            h3 {
                @extend .h5;
                @extend .card-header;
            }

            &>div {
                @extend .card-body;

                p:last-child {
                    margin-bottom: 0;
                }
            }

            span.help {
                @extend .text-muted;
            }

            button,
            button.preview-btn {
                @extend .btn;
                @extend .btn-block;
                @extend .btn-primary;
                @extend .mb-1;
            }

            &.action-danger {
                button {
                    @extend .btn-danger;
                }
            }
        }
    }

    form.main-form {
        @extend .col-md-8;

        button[value='review'] {
            @include icon(before, $fa-var-paper-plane);
        }

        button[value='draft'] {
            @include icon(before, $fa-var-save);
        }

        button[value='save'] {
            @include icon(before, $fa-var-save);
        }

        button[value='_save_as_new'] {
            @include icon(before, $fa-var-copy);
        }
    }
}

div#aid-preview-modal {

    section {
        position: absolute;
        height: 100%;
    }

    div.content {
        padding: 0 0 1rem 0;
        width: 100%;
        height: 100%;
        -webkit-overflow-scrolling: touch;
        overflow-y: scroll;
    }

    iframe {
        width: 100%;
        height: 100%;
        border: none;
    }
}

section#mobile-search {
    form {
        button[type=submit] {
            @extend .btn-lg;
            @extend .btn-block;
        }
    }
}

section#stats {
    @extend .card-deck;

    div.stat {
        @extend .card;
        min-width: 18rem;
        margin-bottom: $card-group-margin * 2;
        color: $dark;

        span.stat-title {
            @extend .card-header;
        }

        div.stat-body {
            @extend .card-body;

            &.number-stat {
                @extend .h1;
                text-align: center;
                margin-bottom: 0;
            }
        }
    }
}

article#aid {

    ul.categories {
        list-style-type: none;
        padding: 0;
        @extend .lead;

        li {
            display: inline;
        }

        li + li::before {
            content: " / ";
        }
    }

    div.deadline-data {
        float: right;
        @extend .ml-3;
        @extend .mb-3;
        @extend .d-none;
        @extend .d-md-block;

        span {
            display: block;
            background-color: $green;
            padding: .3rem 1.5rem;
            border-radius: 2rem 0 2rem 2rem;
            font-size: 2rem;
            color: white;
            font-weight: bold;
            text-align: center;
        }

        p {
            @extend .mt-3;
            text-align: right;
            position: relative;
            @include icon(after, $fa-var-calendar-alt, 2rem);
            padding-right: 2.5rem;
        }

        p::after {
            position: absolute;
            top: .5rem;
            right: 0;
            color: $green;
        }
    }

    .aid-content {
        @extend .row;
        @extend .mt-5;

        overflow-wrap: break-word;
        word-wrap: break-word;
        hyphens: auto;

        footer {
            @extend .mt-5;
            @extend .col-md-8;
            @extend .offset-md-4;

            a.suggest-modification {
                @extend .btn;
                @extend .btn-outline-primary;
                border-radius: 0 1rem 1rem 1rem;
                @include icon(before, $fa-var-pencil-alt);
            }
        }
    }

    .sidebar {
        @extend .col-md-4;
        @extend .mb-3;
    }

    .card {

        @extend .mb-3;

        & > div {
            @extend .card-body;
            padding: 1rem;
            margin-left: 3rem;
            margin-bottom: 0;
        }

        & > div + div {
            padding-top: 0;
        }

        h3 {
            @extend .h6;
            margin-bottom: 0;
        }

        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }

        li + li::before {
            content: "toto";
            color: transparent;
            border-top: 2px solid $font-color;
            display: block;
            width: 3rem;
            height: 0px;
            border-radius: 2px;
            margin-top: .5rem;
            padding-top: .5rem;
        }

        & > div::before {
            color: $contrast-color;
            float: left;
            margin-left: -3rem;
        }

        & > div.financers {
            @include icon(before, $fa-var-handshake, 1.5rem);
        }

        & > div.instructors {
            @include icon(before, $fa-var-search, 1.5rem);
        }

        & > div.call-for-project {
            @include icon(before, $fa-var-thumbtack, 1.5rem);
        }

        & > div.aid-type {
            @include icon(before, $fa-var-euro-sign, 1.5rem);
        }

        & > div.subvention-rate {
            @include icon(before, $fa-var-percent, 1.5rem);
        }

        & > div.recurrence {
            @include icon(before, $fa-var-calendar-alt, 1.5rem);
        }

        & > div.calendar-start {
            @include icon(before, $fa-var-calendar-check, 1.5rem);
        }

        & > div.calendar-predeposit {
            @include icon(before, $fa-var-calendar-day, 1.5rem);
        }

        & > div.calendar-deadline {
            @include icon(before, $fa-var-calendar-times, 1.5rem);
        }

        & > div.data-origin {
            @include icon(before, $fa-var-database, 1.5rem);

            dl {
                margin-bottom: 0;
            }
        }
    }

    #logos {
        @extend .card;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-around;

        & > a[href^="http"]::after {
            display: none;
        }
        
        & > a > img {
            max-height: 100px;
            max-width: 300px;
            padding: 0.5rem;
            filter: saturate(140%);
        }

        & > a > img:hover {
            filter: grayscale(20%);
        }
    }

    .aid-details {
        @extend .col-md-8;

        h2 {
            background-color: $pale-background;
            border-radius: 0 2rem 2rem 2rem;
            padding: .5rem 1rem;
        }

        * + h2 {
            @extend .mt-4;
        }

        div#going-further {
            @extend .mt-4;
        }

        button.cta-btn {
            @extend .btn;
            @extend .btn-primary;
            display: block;
            margin: 3rem auto 0 auto;
        }

    }

    div.aid-actions {
        @extend .mb-3;

        button,
        a {
            @extend .btn;
            @extend .btn-light;

            &.report-error {
                @include icon(before, $fa-var-bullhorn);
            }

            &.bundle {
                @include icon(before, $fa-var-bars);
            }

            &.suggest-modification {
                @include icon(before, $fa-var-pen);
            }
        }
    }

    div.aid-data {
        @extend .card;

        h2 {
            @extend .card-body;
        }

        ul {
            @extend .list-group;
            @extend .list-group-flush;

            li {
                @extend .list-group-item;
            }
        }
    }
}

div#error-report-modal {
    p.center {
        a {
            @include icon(before, $fa-var-envelope);
        }
    }
}

div#bundle-modal {
    form {
        div.single-input {
            @extend .custom-control;
            @extend .custom-checkbox;

            label {
                @extend .custom-control-label;
            }

            input {
                @extend .custom-control-input;
            }
        }

        button#bundle-btn {
            @extend .btn-block;
            @extend .btn-primary;
        }
    }
}

div#share-results-modal {
    h2 {
        @extend .h5;
    }

    form {
        @extend .mb-3;

        button {
            @extend .btn;
            @extend .btn-primary;
            @extend .btn-block;
        }
    }
}

section#login-form {
    @extend .py-5;
}

section#register-form {
    @extend .py-5;
}

section#profile-form {
    h1 {
        @extend .mb-4;
    }
}

section#tags {
    div.tag {
        @extend .col-sm-6;
        @extend .col-md-4;
        @extend .col-lg-3;
    }
}

section#bookmarks {
    div.bookmark {
        @extend .card;
        @extend .shadow-sm;
        @extend .rounded;
        @extend .mb-3;

        &>div {
            @extend .card-body;
            position: relative;

            h2 {
                @extend .card-title;
                @extend .h3;
            }

            a {
                @extend .btn;
                @extend .btn-primary;
            }

            form.update-form {
                position: absolute;
                top: $card-spacer-x;
                right: $card-spacer-x;
                @extend .form-inline;

                div.alert-fields {
                    display: flex;
                    align-items: center;

                    div.alert_checkbox {
                        @extend .custom-control;
                        @extend .custom-switch;
                        @extend .mr-2;

                        input {
                            @extend .custom-control-input;
                        }

                        label {
                            @extend .custom-control-label;
                            white-space: nowrap;
                        }
                    }
                }

                button {
                    @extend .ml-2;
                }
            }


            form.delete-form {
                float: right;

                button {
                    @extend .btn-danger;
                    @include icon(before, $fa-var-exclamation-circle);
                }
            }
        }
    }
}

section#amend-ui {
    h1 {

        small {
            @extend .text-muted;
        }
    }

    nav {
        @extend .mb-3;
        a + a {
            @extend .ml-3;
        }
    }

    .field-diff {
        @extend .mb-3;

        .diff-line {
            margin: 0;
            @extend .py-1;
            display: inline;

            &.add {
                background-color: #cdffd8;
            }

            &.rm {
                background-color: #ffdce0;
            }

            &.context {
                background-color: $gray-100;
                user-select: none;
            }

            &.common {
                background-color: #dbedff;
            }

            span.prefix {
                user-select: none;
            }
        }
    }
}

article#draft-list {
    div.info {
        span.counter {
            @extend .badge;
            @extend .badge-pill;
            @extend .badge-light;
            font-size: $font-size-base;
        }
    }

    .form-container {
        margin-bottom: 1rem;

        select {
            @extend .custom-select;
            @extend .ml-2;
            @extend .mr-3;
            display: inline-block;
            width: inherit;
            border-radius: 0 1rem 1rem 1rem;
        }
        button.filter-btn {
            @extend .btn;
            @extend .btn-primary;
            @extend .ml-3;
            @include icon(before, $fa-var-search);
        }
    }

    .table-help {
        @extend .float-right;
        @extend .text-muted;
    }

    table {
        th {
            white-space: nowrap;
        }
        td.aid-deadline-cell,
        td.aid-status-cell {
            white-space: nowrap;
        }
    }
}

div#alert-modal {
    form {
        width: 100%;
    }
}

span.softmaxlength-counter {
    @extend .small;
    @extend .ml-1;

    &.out-of-range {
        @extend .text-danger;
    }
}


div#search-steps {
    p.steps {
        text-align: center;
        margin-bottom: 5rem;
        line-height: 3;

        span.step {
            white-space: nowrap;
        }

        span.counter {
            display: inline-block;
            width: 1.5rem;
            height: 1.5rem;
            text-align: center;
            vertical-align: baseline;
            border: 1px solid white;
            border-radius: 50%;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        span.counter.active {
            background-color: white;
            color: $dark;
        }

        span.separator {
            display: inline-block;
            width: 2rem;
            height: .4rem;
            border-top: 1px solid white;
            padding: 0 .25rem;
            vertical-align: baseline;
        }

    }

    h1 {
        @extend .mb-5;
        @extend .h2;
    }

    h2 {
        @extend .h4;
    }

    h3 {
        @extend .h5;
    }

    form {
        margin-bottom: 3rem;

        div.form-group {
            margin-bottom: 3rem;
        }

        div.custom-control {
            margin-bottom: .5rem;
        }

        button[type=submit] {
            display: inline-block;
            margin-right: 1rem;
        }

        div.navigation-links {
            display: inline-block;
            margin-top: 1.5rem;

            a {
                color: white;
                margin-right: 1rem;
                opacity: 0.85;
            }
        }

        div.form-group > label {
            display: none;
        }
    }

    form#audience {

        div#form-group-targeted_audiences {
            & > div {
                @extend .mb-5;
            }

            h2 {
                display: inline-block;
                vertical-align: baseline;
                @extend .h5;
                @extend .mr-3;
                font-family: $font-family-base;
            }

            div.buttons {
                display: inline-block;
                vertical-align: baseline;
            }

            button[type=submit] {
                @extend .btn-light;
                @extend .mb-3;
                text-transform: uppercase;
                vertical-align: baseline;
                color: $dark;
                font-weight: bold;
                @extend .px-3;
                @extend .mr-3;
                font-family: $font-family-sans-serif;
            }
        }
    }

    form#perimeter {

        div.form-group,
        button,
        div.navigation-links {
            margin-bottom: 1rem;
            margin-top: 1rem;
        }

        div#form-group-perimeter {
            width: 30rem;
            max-width: 100%;
            display: inline-block;
            margin-right: .5rem;
            vertical-align: bottom;
        }

        button[type=submit] {
            border-radius: 0 1.5rem 1.5rem 0;
            @extend .px-5;
            @include icon(before, $fa-var-search);
        }
    }

    form#categories {
        div.custom-control + h3 {
            @extend .mt-4;
        }
    }
}

ul.aid-categories {
    padding: 0;
    list-style-type: none;

    li.theme {
        text-transform: uppercase;
    }

    ul {
        display: inline;
        padding: 0;
        text-transform: none;

        &:before {
            content: " > ";
        }

        li {
            display: inline;
        }

        li + li:before {
            content: " + ";
        }
    }
}
