{% load widget_tweaks %}
<div id="form-group-{{ field.name }}" class="fr-select-group{% if field.field.required %} required{% endif %} {% if required == 'true' %}required{% endif %}">

    <label for="{{ field.id_for_label }}">
        <span class="at-field-label{% if field.field.required %} at-required--label{% endif %}">{{ field.label }}</span>

        {% if field.help_text %}
            <span class="fr-hint-text">{{ field.help_text|safe }}</span>
        {% endif %}
    </label>

    {% if nest_field_class %}
    <div class="{{ nest_field_class }}">
    {% endif %}

    {% if field.errors %}
        {% with "text-input-error-"|add:field.name as error_message %}
            {% render_field field aria-describedby=error_message aria-invalid="true" %}
        {% endwith %}
    {% else %}
        {{ field }}
    {% endif %}

    {% if nest_field_class %}
    </div>
    {% endif %}

    {% if field.errors %}
    <p id="text-input-error-{{ field.name }}" class="fr-error-text">
        {{ field.errors.0 }}
    </p>
    {% endif %}
</div>
