<form id="search-form" method="get" {% if search_page and not search_page_with_subdomain %} action="{% url 'search_minisite_view' search_page.slug %}" {% else %} action="{% url 'search_view' %}" {% endif %} autocomplete='off'>

    {{ form.integration }}

    {% block other_actions %}
    <div class="other-actions fr-mb-2w fr-grid-row fr-grid-row--middle">
        {% block other-actions %}
        {% endblock other-actions %}
    </div>
    {% endblock other_actions %}

    <div class="form-container fr-px-2w">
        <div class="form-body">
            {% block form-body %}
                <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--center">

                    {% if search_page.show_audience_field %}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.targeted_audiences %}
                        </div>
                    {% endif %}

                    {% if search_page.show_perimeter_field %}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.perimeter %}
                        </div>
                    {% endif %}

                    {% if search_page.show_text_field %}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.text %}
                        </div>
                    {% endif %}

                    {% if search_page.show_categories_field %}
                        {# Categories = Thématiques #}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.categories %}
                        </div>
                    {% endif %}

                    {% if search_page.show_backers_field %}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.backers %}
                        </div>
                    {% endif %}

                    {% if search_page.show_mobilization_step_field %}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.mobilization_step %}
                        </div>
                    {% endif %}

                    {% if search_page.show_aid_type_field %}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.aid_type %}
                        </div>
                    {% endif %}
                </div>
                <div class="search-form-extra-fields">

                    <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--center">

                        {% if not search_page.show_audience_field %}
                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_checkbox_snippet_multiple.html' with field=form.targeted_audiences %}
                        </div>
                        {% endif %}

                        {% if not search_page.show_perimeter_field %}
                            <div class="fr-col-12 fr-col-md-3">
                                {% include '_field_snippet.html' with field=form.perimeter %}
                            </div>
                        {% endif %}

                        {% if not search_page.show_text_field %}
                            <div class="fr-col-12 fr-col-md-3">
                                {% include '_field_snippet.html' with field=form.text %}
                            </div>
                        {% endif %}

                        {% if not search_page.show_categories_field %}
                            {# Categories = Thématiques #}
                            <div class="fr-col-12 fr-col-md-3">
                                {% include '_field_snippet.html' with field=form.categories %}
                            </div>
                        {% endif %}

                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.programs %}
                        </div>

                        {% if not search_page.show_backers_field %}
                            <div class="fr-col-12 fr-col-md-3">
                                {% include '_field_snippet.html' with field=form.backers %}
                            </div>
                        {% endif %}

                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.apply_before %}
                        </div>

                        {% if not search_page.show_aid_type_field %}
                            <div class="fr-col-12 fr-col-md-3">
                                {% include '_field_snippet.html' with field=form.aid_type %}
                            </div>
                        {% endif %}

                        {% if not search_page.show_mobilization_step_field %}
                            <div class="fr-col-12 fr-col-md-3">
                                {% include '_select_snippet.html' with field=form.mobilization_step %}
                            </div>
                        {% endif %}

                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.destinations  %}
                        </div>

                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.is_charged  %}
                        </div>

                        <div class="fr-col-12 fr-col-md-3">
                            {% include '_field_snippet.html' with field=form.european_aid  %}
                        </div>
                    </div>
                    <div class="fr-mt-2w">
                        {% include '_checkbox_snippet.html' with field=form.call_for_projects_only  %}
                    </div>
                </div>

                <div class="fr-mt-2w">
                    <ul class="fr-btns-group fr-btns-group--center fr-btns-group--inline">
                        <li>
                            <button id="search-form-more-options" class="fr-btn fr-btn--tertiary-no-outline search-form-extra-action">
                                <span class="fr-icon-add-line" aria-hidden="true"></span> Afficher les critères avancés
                            </button>
                        </li>
                    </ul>

                    <ul class="fr-btns-group fr-btns-group--center fr-btns-group--inline">
                        <li>
                            <a {% if search_page and not search_page_with_subdomain %} href="{% url 'search_minisite_view' search_page.slug %}" {% else %} href="{% url 'search_view' %}" {% endif %} class="fr-btn fr-btn--tertiary-no-outline search-form-extra-action">
                                <span class="fr-icon-arrow-go-back-line" aria-hidden="true"></span> Nouvelle recherche
                            </a>
                        </li>
                        <li>
                            <button name="action" value="search-filter" class="fr-btn" title="Rechercher" type="submit">
                                <span class="fr-icon-search-line fr-mr-1w" aria-hidden="true"></span> Rechercher
                            </button>
                        </li>
                    </ul>
                    <div>
                    </div>
                </div>
            {% endblock form-body %}
        </div>
    </div>
</form>
