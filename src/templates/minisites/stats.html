{% extends 'stats/stats.html' %}
{% load i18n %}

{% block header %}
    {% include 'minisites/_header.html' %}
{% endblock %}

{% block footer %}
    {% include 'minisites/_footer.html' %}
{% endblock %}

{% block breadcrumbs %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li><a href="{% url 'home' %}">{{ _('Home') }}</a></li>
        <li class="active" aria-current="page">Stats</li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<section id="stats">

    <div class="stat">
        <span class="stat-title">
            {{ _('Available aids') }}<br />
            <small>{% blocktrans trimmed %}
                Published aids that are still open.
            {% endblocktrans %}</small>
        </span>
        <div class="stat-body number-stat">
            <span>{{ nb_live_aids }}</span>
        </div>
    </div>

    <div class="stat">
        <span class="stat-title">
            {{ _('Draft aids') }}<br />
        </span>
        <div class="stat-body number-stat">
            <span>{{ nb_draft_aids }}</span>
        </div>
    </div>

    <div class="stat">
        <span class="stat-title">
            {{ _('Expired aids') }}<br />
        </span>
        <div class="stat-body number-stat">
            <span>{{ nb_expired_aids }}</span>
        </div>
    </div>

    <div class="stat">
        <span class="stat-title">
            {{ _('Total number of views') }}<br />
            <small>{{ _('Since its launch on') }} {{ search_page.date_created|date:'d/m/y' }}</small>
        </span>
        <div class="stat-body number-stat">
            <span>{{ view_count_total }}</span>
        </div>
    </div>

    <div class="stat">
        <span class="stat-title">
            {{ _('Number of views within the last 30 days') }}<br />
        </span>
        <div class="stat-body number-stat">
            <span>{{ view_count_last_30_days }}</span>
        </div>
    </div>

    <div class="stat">
        <span class="stat-title">
            {{ _('Number of views within the last 7 days') }}<br />
        </span>
        <div class="stat-body number-stat">
            <span>{{ view_count_last_7_days }}</span>
        </div>
    </div>

    <div class="stat">
        <span class="stat-title">
            {{ _('Aids viewed within the last 30 days') }}<br />
        </span>
        <div class="stat-body number-stat">
            <span>{{ aid_view_count_last_30_days }}</span>
        </div>
    </div>

    <div class="stat">
        <span class="stat-title">
            {{ _('Aids viewed within the last 7 days') }}<br />
        </span>
        <div class="stat-body number-stat">
            <span>{{ aid_view_count_last_7_days }}</span>
        </div>
    </div>

    <div class="stat full-width">
        <span class="stat-title">
            {{ _('Top viewed aids') }} (top 10)<br />
        </span>
        <div class="stat-body">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>{{ _('Rank') }}</th>
                        <th>{{ _('Aid URL') }}</th>
                        <th>{{ _('Hits') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for aid in top_10_aid_viewed %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ aid.meta }}</td>
                            <td>{{ aid.view_count }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
    {{ block.super }}
    {% include 'minisites/_css.html' %}
{% endblock %}
