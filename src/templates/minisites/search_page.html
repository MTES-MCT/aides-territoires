{% extends 'aids/_base_search.html' %}
{% load compress colors %}

{% block extratitle %}{{ search_page.meta_title|default:search_page.title }}{% endblock %}
{% block meta_description %}{{ search_page.meta_description }}{% endblock %}

{% block header %}
    {% include 'minisites/_header.html' %}
{% endblock %}

{% block footer %}
    {% include 'minisites/_footer.html' %}
{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block header_warning %}{% endblock %}

{% block user_menu %}{% endblock %}

{% block extra_css %}
{{ block.super }}
<style>

{% if search_page.color_1 %}
body {
    background: {{ search_page.color_1 }};
}

main {
    background: {{ search_page.color_1 }};
}

.dark-background .main-content > article,
section#aid-list article,
div.modal .modal-dialog {
    color: rgba(0, 0, 0, 0.85) !important;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
}

{% endif %}

{% if search_page.color_2 %}
section#search-engine div.form-container {
    background-color: {{ search_page.color_2 }} !important;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
}

section#search-engine div.other-actions button:hover,
section#search-engine div.other-actions a:hover {
    color: white;
}
{% endif %}

{% if search_page.color_3 %}
section#search-engine div.form-container button,
section#search-engine a#save-alert-btn,
div#share-results-modal form button,
div.modal .modal-dialog section footer button {
    background-color: {{ search_page.color_3 }} !important;
    border: {{ search_page.color_3 }} !important;
}

section#search-engine div.form-container button:hover,
section#search-engine a#save-alert-btn:hover,
div#share-results-modal form button:hover {
    background-color: {% darken search_page.color_3 7.5 %} !important;
}

section#aid-list article.aid span.no-deadline {
    border-color: {{ search_page.color_3 }} !important;
}

h1::after {
    border-color: {{ search_page.color_3 }};
}
{% endif %}

{% if search_page.color_4 %}
.dark-background .main-content > article a,
section#aid-list article.aid div h1 a,
nav#pagination ul li a {
    color: {{ search_page.color_4 }} !important;
}

.dark-background .main-content > article a {
    text-decoration: underline;
}

.dark-background .main-content > article a:hover,
section#aid-list article.aid div h1 a:hover {
    color: {% darken search_page.color_4 20 %} !important;
}
{% endif %}

{% if search_page.color_5 %}
body > footer {
    background-color: {{ search_page.color_5 }} !important;
}
{% endif %}

</style>
{% endblock %}

{% block content %}
<article>
<h1>{{ search_page.title }}</h1>

{{ search_page.content|safe }}
</article>

{{ block.super }}
{% endblock %}

{% block search-engine %}
     {% include 'minisites/_search_form.html' %}
{% endblock %}

{% block other_actions %}
    <div class="other-actions">

        {% comment %}
            This hidden button is here to make it the "default" submit button.
            This way, we make sure pressing "enter" performs a new search instead
            of going to the "more filters" page.
        {% endcomment %}
        <button type="submit" class="hidden-btn">{{ _('Filter results') }}</button>

        <button id="new-filters-btn" name="action" value="more-filters" type="submit" class="advanced-link" formmethod="GET" formaction="{% url 'advanced_search_view' %}">
            {{ _('More filters') }}
        </button>

        <a href="#" class="js" id="share-btn" data-toggle="modal" data-target="#share-results-modal">
            {{ _('Share') }}
        </a>

        <a href="#" id="save-alert-btn" class="js" data-toggle="modal" data-target="#alert-search-modal">
            {{ _('Create an alert') }}
        </a>
    </div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
{% compress js %}
<script src="/static/js/aids/perimeter_autocomplete.js"></script>
<script src="/static/js/aids/categories_autocomplete.js"></script>
<script src="/static/js/aids/targeted_audiances_autocomplete.js"></script>
{% endcompress %}
{% endblock %}
